<%= render partial: 'claims/claimant/navigation' %>

<div class='row'>
  <div class="page-header">
    <h2>Step 1 of 6 - Personal details</h2>
  </div>

  <section id='edit-claim'>
    <p>Add the details of the claimants and defendants involved in the possession claim</p>
    <%= toggle_inline_help_link( 
      'About claimants and defendants', 
      'Bacon ipsum dolor sit amet beef boudin pork belly pancetta, t-bone ground round shoulder chuck andouille bresaola doner drumstick. Pork loin jerky doner swine boudin ball tip pork belly. Beef ribs frankfurter turducken short ribs corned beef, t-bone capicola pork belly brisket venison spare ribs ball tip chicken rump swine. Bresaola tongue short ribs t-bone jerky.'
    ) %>

    <div class='row'>

      <h3>Who is the Claimant in this claim?</h3>
      <% @claim.claimants.each.with_index do |person, i| %>
        <% options = {} %>
        <% if(@editors[person.id]) %>
          <% options[:class] = 'person well clearfix' %>
          <% options[:show_dx] = true %>
          <% if i > 0 %>
            <% options[:title] = "Additional Claimant" %>
            <% options[:show_remove_button] = true %>
            <% options[:duplicate_address] = @claim.claimants.first.address.id %>
          <% end %>
          <%= render partial: 'people/edit', locals: {person: person, options: options} %>
        <% else %>
          <% options[:class] = "person claimant well clearfix" %>
          <% options[:class] << " not-first" if i > 0 %>
          <% options[:show_edit_link] = true %>
          <%= render partial: 'people/show', locals: {person: person, options: options} %>
        <% end %>
      <% end %>

      <%= form_tag(new_claim_person_path( @claim ), :method => "get", :class => 'add-additional-person' ) do %>
        <%= hidden_field_tag 'type', 'claimant' %>
        <%= submit_tag("Add an additional claimant") %>
      <% end %>

      <h3>Who are the Defendants in this claim?</h3>
      <% @claim.defendants.each.with_index do |person, i| %>
        <% options = {} %>
        <% if(@editors[person.id] || person.full_name.nil?) %>
          <% options = {} %>
          <% options[:class] = 'person well clearfix' %>
          <% if i > 0 %>
            <% options[:title] = "Additional Defendant" %>
            <% options[:show_remove_button] = true  %>
            <% options[:duplicate_address] = @claim.defendants.first.address.id  %>
          <% end %>
          <%= render partial: 'people/edit', locals: {person: person, options: options} %>
        <% else %>
          <% options[:class] = "person defendant well clearfix" %>
          <% options[:class] << " not-first" if i > 0 %>
          <% options[:show_edit_link] = true %>
          <%= render partial: 'people/show', locals: {person: person, options: options} %>
        <% end %>
      <% end %>

      <%= form_tag(new_claim_person_path( @claim ), :method => "get", :class => 'add-additional-person' ) do %>
        <%= hidden_field_tag 'type', 'defendant' %>
        <%= submit_tag("Add a co-defendant") %>
      <% end %>

      <%= simple_form_for @claim, url: update_claim_path( @claim) do |f| %>
        <div class='well clearfix'>
          <h4>Address for possession</h4>
          <a href='#'>Same address as defendant</a>
          <div class='address'>
            <%= render partial: 'addresses/show', locals: {address: @claim.address_for_possession} %>
          </div>
        </div>

        <div class='well radios clearfix'>
          <h4>What type of property is it</h4>
          <%= f.radio_button(:property_type, 'residential') %>
          <%= label_tag :claim_property_type_residential, 'Residential' %>

          <%= f.radio_button :property_type, 'commercial' %>
          <%= label_tag :claim_property_type_commercial, 'Commercial' %>
        </div>

        <div class='well radios clearfix'>
          <h4>Who is in the property</h4>
          <%= f.radio_button :resident_type, 'private tenant' %>
          <%= label_tag :claim_resident_type_private_tenant, 'Private Tenant' %>

          <%= f.radio_button :resident_type, 'squatter' %>
          <%= label_tag :claim_resident_type_squatter, 'Squatter' %>
        </div>
      </div>

      <%= f.submit 'Save & Continue' %>
      <%= f.submit 'Close' %>
      <% end %>
  </section>
</div>