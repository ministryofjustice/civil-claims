= claim_form.simple_fields_for :defendants do |df|
  - is_additional_defendant = df.index > 0
  .moj-panel.edit-person
    - if (is_additional_defendant) 
      %strong Add an additional tenant
    = df.input :full_name, placeholder: "e.g. John Smith"
    = df.input :phone
    = df.input :mobile
    = df.input :email

    = df.simple_fields_for :address do |dff|
      - has_valid_address = defendant.address.present? && dff.object.valid? && !dff.object.street_1.blank?
      = dff.input :postcode do
        = dff.input_field :postcode, class: "postcode", required: true
        = submit_tag "Find UK Address", class: "button-secondary find-uk-address" 

        - unless has_valid_address
          = submit_tag "Same address as first tenant", :class => "button-secondary"


      %div.address{ class: ("element-invisible" unless has_valid_address) }
        = dff.input :street_1, label: 'Street'
        = dff.input :street_2, :label => nil
        = dff.input :street_3, :label =>""
        = dff.input :town
        = dff.input :county
        = dff.input :postcode

    -if is_additional_defendant
      = button_tag( name: 'destroy', value: df.object.id, class: 'button-warning' ) do
        = content_tag(:span, 'Remove')